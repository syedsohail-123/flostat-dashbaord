var H=Object.defineProperty;var K=(n,e,t)=>e in n?H(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t;var r=(n,e,t)=>K(n,typeof e!="symbol"?e+"":e,t);import{N as Y,c as J,S as X,g as Z,t as Q,a as ee,b as te,T as l,d as R}from"./index-COCMTINm.js";import{C as At}from"./index-COCMTINm.js";const ne={name:"serializerMiddleware",step:"serialize",tags:["SERIALIZER"],override:!0};function ie(n,e,t){n.__smithy_context?n.__smithy_context.features||(n.__smithy_context.features={}):n.__smithy_context={features:{}},n.__smithy_context.features[e]=t}const v="***SensitiveInformation***";function _(n,e){if(e==null)return e;const t=Y.of(n);if(t.getMergedTraits().sensitive)return v;if(t.isListSchema()){if(!!t.getValueSchema().getMergedTraits().sensitive)return v}else if(t.isMapSchema()){if(!!t.getKeySchema().getMergedTraits().sensitive||!!t.getValueSchema().getMergedTraits().sensitive)return v}else if(t.isStructSchema()&&typeof e=="object"){const o=e,i={};for(const[d,c]of t.structIterator())o[d]!=null&&(i[d]=_(c,o[d]));return i}return e}class C{constructor(){r(this,"middlewareStack",J());r(this,"schema")}static classBuilder(){return new oe}resolveMiddlewareWithContext(e,t,o,{middlewareFn:i,clientName:d,commandName:c,inputFilterSensitiveLog:a,outputFilterSensitiveLog:h,smithyContext:x,additionalContext:g,CommandCtor:I}){for(const y of i.bind(this)(I,e,t,o))this.middlewareStack.use(y);const B=e.concat(this.middlewareStack),{logger:U}=t,q={logger:U,clientName:d,commandName:c,inputFilterSensitiveLog:a,outputFilterSensitiveLog:h,[X]:{commandInstance:this,...x},...g},{requestHandler:W}=t;return B.resolve(y=>W.handle(y.request,o||{}),q)}}class oe{constructor(){r(this,"_init",()=>{});r(this,"_ep",{});r(this,"_middlewareFn",()=>[]);r(this,"_commandName","");r(this,"_clientName","");r(this,"_additionalContext",{});r(this,"_smithyContext",{});r(this,"_inputFilterSensitiveLog");r(this,"_outputFilterSensitiveLog");r(this,"_serializer",null);r(this,"_deserializer",null);r(this,"_operationSchema")}init(e){this._init=e}ep(e){return this._ep=e,this}m(e){return this._middlewareFn=e,this}s(e,t,o={}){return this._smithyContext={service:e,operation:t,...o},this}c(e={}){return this._additionalContext=e,this}n(e,t){return this._clientName=e,this._commandName=t,this}f(e=o=>o,t=o=>o){return this._inputFilterSensitiveLog=e,this._outputFilterSensitiveLog=t,this}ser(e){return this._serializer=e,this}de(e){return this._deserializer=e,this}sc(e){return this._operationSchema=e,this._smithyContext.operationSchema=e,this}build(){const e=this;let t;return t=class extends C{constructor(...[i]){super();r(this,"input");r(this,"serialize",e._serializer);r(this,"deserialize",e._deserializer);this.input=i??{},e._init(this),this.schema=e._operationSchema}static getEndpointParameterInstructions(){return e._ep}resolveMiddleware(i,d,c){const a=e._operationSchema,h=(a==null?void 0:a[4])??(a==null?void 0:a.input),x=(a==null?void 0:a[5])??(a==null?void 0:a.output);return this.resolveMiddlewareWithContext(i,d,c,{CommandCtor:t,middlewareFn:e._middlewareFn,clientName:e._clientName,commandName:e._commandName,inputFilterSensitiveLog:e._inputFilterSensitiveLog??(a?_.bind(null,h):g=>g),outputFilterSensitiveLog:e._outputFilterSensitiveLog??(a?_.bind(null,x):g=>g),smithyContext:e._smithyContext,additionalContext:e._additionalContext})}}}}const re=async n=>{const e=(n==null?void 0:n.Bucket)||"";if(typeof n.Bucket=="string"&&(n.Bucket=e.replace(/#/g,encodeURIComponent("#")).replace(/\?/g,encodeURIComponent("?"))),le(e)){if(n.ForcePathStyle===!0)throw new Error("Path-style addressing cannot be used with ARN buckets")}else(!de(e)||e.indexOf(".")!==-1&&!String(n.Endpoint).startsWith("http:")||e.toLowerCase()!==e||e.length<3)&&(n.ForcePathStyle=!0);return n.DisableMultiRegionAccessPoints&&(n.disableMultiRegionAccessPoints=!0,n.DisableMRAP=!0),n},se=/^[a-z0-9][a-z0-9\.\-]{1,61}[a-z0-9]$/,ce=/(\d+\.){3}\d+/,ae=/\.\./,de=n=>se.test(n)&&!ce.test(n)&&!ae.test(n),le=n=>{const[e,t,o,,,i]=n.split(":"),d=e==="arn"&&n.split(":").length>=6,c=!!(d&&t&&o&&i);if(d&&!c)throw new Error(`Invalid ARN: ${n} was an invalid ARN.`);return c},ue=(n,e,t)=>{const o=async()=>{const i=t[n]??t[e];return typeof i=="function"?i():i};return n==="credentialScope"||e==="CredentialScope"?async()=>{const i=typeof t.credentials=="function"?await t.credentials():t.credentials;return(i==null?void 0:i.credentialScope)??(i==null?void 0:i.CredentialScope)}:n==="accountId"||e==="AccountId"?async()=>{const i=typeof t.credentials=="function"?await t.credentials():t.credentials;return(i==null?void 0:i.accountId)??(i==null?void 0:i.AccountId)}:n==="endpoint"||e==="endpoint"?async()=>{if(t.isCustomEndpoint===!1)return;const i=await o();if(i&&typeof i=="object"){if("url"in i)return i.url.href;if("hostname"in i){const{protocol:d,hostname:c,port:a,path:h}=i;return`${d}//${c}${a?":"+a:""}${h}`}}return i}:o},pe=async(n,e,t,o)=>{if(!t.isCustomEndpoint){let c;t.serviceConfiguredEndpoint?c=await t.serviceConfiguredEndpoint():c=await Z(t.serviceId),c&&(t.endpoint=()=>Promise.resolve(Q(c)),t.isCustomEndpoint=!0)}const i=await Ee(n,e,t);if(typeof t.endpointProvider!="function")throw new Error("config.endpointProvider is not set.");return t.endpointProvider(i,o)},Ee=async(n,e,t)=>{var d;const o={},i=((d=e==null?void 0:e.getEndpointParameterInstructions)==null?void 0:d.call(e))||{};for(const[c,a]of Object.entries(i))switch(a.type){case"staticContextParams":o[c]=a.value;break;case"contextParams":o[c]=n[a.name];break;case"clientContextParams":case"builtInParams":o[c]=await ue(a.name,c,t)();break;case"operationContextParams":o[c]=a.get(n);break;default:throw new Error("Unrecognized endpoint parameter instruction: "+JSON.stringify(a))}return Object.keys(i).length===0&&Object.assign(o,t),String(t.serviceId).toLowerCase()==="s3"&&await re(o),o},me=({config:n,instructions:e})=>(t,o)=>async i=>{var a,h,x;n.isCustomEndpoint&&ie(o,"ENDPOINT_OVERRIDE","N");const d=await pe(i.input,{getEndpointParameterInstructions(){return e}},{...n},o);o.endpointV2=d,o.authSchemes=(a=d.properties)==null?void 0:a.authSchemes;const c=(h=o.authSchemes)==null?void 0:h[0];if(c){o.signing_region=c.signingRegion,o.signing_service=c.signingName;const g=ee(o),I=(x=g==null?void 0:g.selectedHttpAuthScheme)==null?void 0:x.httpAuthOption;I&&(I.signingProperties=Object.assign(I.signingProperties||{},{signing_region:c.signingRegion,signingRegion:c.signingRegion,signing_service:c.signingName,signingName:c.signingName,signingRegionSet:c.signingRegionSet},c.properties))}return t({...i})},fe={step:"serialize",tags:["ENDPOINT_PARAMETERS","ENDPOINT_V2","ENDPOINT"],name:"endpointV2Middleware",override:!0,relation:"before",toMiddleware:ne.name},P=(n,e)=>({applyToStack:t=>{t.addRelativeTo(me({config:n,instructions:e}),fe)}});let u=class N extends te{constructor(e){super(e),Object.setPrototypeOf(this,N.prototype)}},ge=class A extends u{constructor(t){super({name:"InternalErrorException",$fault:"server",...t});r(this,"name","InternalErrorException");r(this,"$fault","server");Object.setPrototypeOf(this,A.prototype)}},he=class w extends u{constructor(t){super({name:"InvalidParameterException",$fault:"client",...t});r(this,"name","InvalidParameterException");r(this,"$fault","client");Object.setPrototypeOf(this,w.prototype)}},xe=class O extends u{constructor(t){super({name:"LimitExceededException",$fault:"client",...t});r(this,"name","LimitExceededException");r(this,"$fault","client");Object.setPrototypeOf(this,O.prototype)}},Ie=class $ extends u{constructor(t){super({name:"NotAuthorizedException",$fault:"client",...t});r(this,"name","NotAuthorizedException");r(this,"$fault","client");Object.setPrototypeOf(this,$.prototype)}},ye=class b extends u{constructor(t){super({name:"ResourceConflictException",$fault:"client",...t});r(this,"name","ResourceConflictException");r(this,"$fault","client");Object.setPrototypeOf(this,b.prototype)}},ve=class F extends u{constructor(t){super({name:"TooManyRequestsException",$fault:"client",...t});r(this,"name","TooManyRequestsException");r(this,"$fault","client");Object.setPrototypeOf(this,F.prototype)}},_e=class M extends u{constructor(t){super({name:"ResourceNotFoundException",$fault:"client",...t});r(this,"name","ResourceNotFoundException");r(this,"$fault","client");Object.setPrototypeOf(this,M.prototype)}},Ce=class T extends u{constructor(t){super({name:"ExternalServiceException",$fault:"client",...t});r(this,"name","ExternalServiceException");r(this,"$fault","client");Object.setPrototypeOf(this,T.prototype)}},Se=class z extends u{constructor(t){super({name:"InvalidIdentityPoolConfigurationException",$fault:"client",...t});r(this,"name","InvalidIdentityPoolConfigurationException");r(this,"$fault","client");Object.setPrototypeOf(this,z.prototype)}},Re=class G extends u{constructor(t){super({name:"DeveloperUserAlreadyRegisteredException",$fault:"client",...t});r(this,"name","DeveloperUserAlreadyRegisteredException");r(this,"$fault","client");Object.setPrototypeOf(this,G.prototype)}},Pe=class L extends u{constructor(t){super({name:"ConcurrentModificationException",$fault:"client",...t});r(this,"name","ConcurrentModificationException");r(this,"$fault","client");Object.setPrototypeOf(this,L.prototype)}};const Ne="AccountId",Ae="AccessKeyId",j="Credentials",we="ConcurrentModificationException",Oe="CustomRoleArn",$e="DeveloperUserAlreadyRegisteredException",be="Expiration",Fe="ExternalServiceException",Me="GetCredentialsForIdentity",Te="GetCredentialsForIdentityInput",ze="GetCredentialsForIdentityResponse",Ge="GetId",Le="GetIdInput",je="GetIdResponse",De="InternalErrorException",S="IdentityId",ke="InvalidIdentityPoolConfigurationException",Ve="InvalidParameterException",Be="IdentityPoolId",Ue="IdentityProviderToken",D="Logins",qe="LimitExceededException",We="LoginsMap",He="NotAuthorizedException",Ke="ResourceConflictException",Ye="ResourceNotFoundException",Je="SecretKey",Xe="SecretKeyString",Ze="SessionToken",Qe="TooManyRequestsException",m="client",p="error",f="httpError",E="message",et="server",k="smithy.ts.sdk.synthetic.com.amazonaws.cognitoidentity",s="com.amazonaws.cognitoidentity";var tt=[0,s,Ue,8,0],nt=[0,s,Xe,8,0],it=[-3,s,we,{[p]:m,[f]:400},[E],[0]];l.for(s).registerError(it,Pe);var ot=[3,s,j,0,[Ae,Je,Ze,be],[0,[()=>nt,0],0,4]],rt=[-3,s,$e,{[p]:m,[f]:400},[E],[0]];l.for(s).registerError(rt,Re);var st=[-3,s,Fe,{[p]:m,[f]:400},[E],[0]];l.for(s).registerError(st,Ce);var ct=[3,s,Te,0,[S,D,Oe],[0,[()=>V,0],0]],at=[3,s,ze,0,[S,j],[0,[()=>ot,0]]],dt=[3,s,Le,0,[Ne,Be,D],[0,0,[()=>V,0]]],lt=[3,s,je,0,[S],[0]],ut=[-3,s,De,{[p]:et},[E],[0]];l.for(s).registerError(ut,ge);var pt=[-3,s,ke,{[p]:m,[f]:400},[E],[0]];l.for(s).registerError(pt,Se);var Et=[-3,s,Ve,{[p]:m,[f]:400},[E],[0]];l.for(s).registerError(Et,he);var mt=[-3,s,qe,{[p]:m,[f]:400},[E],[0]];l.for(s).registerError(mt,xe);var ft=[-3,s,He,{[p]:m,[f]:403},[E],[0]];l.for(s).registerError(ft,Ie);var gt=[-3,s,Ke,{[p]:m,[f]:409},[E],[0]];l.for(s).registerError(gt,ye);var ht=[-3,s,Ye,{[p]:m,[f]:404},[E],[0]];l.for(s).registerError(ht,_e);var xt=[-3,s,Qe,{[p]:m,[f]:429},[E],[0]];l.for(s).registerError(xt,ve);var It=[-3,k,"CognitoIdentityServiceException",0,[],[]];l.for(k).registerError(It,u);var V=[2,s,We,0,[0,0],[()=>tt,0]],yt=[9,s,Me,0,()=>ct,()=>at],vt=[9,s,Ge,0,()=>dt,()=>lt];class St extends C.classBuilder().ep(R).m(function(e,t,o,i){return[P(o,e.getEndpointParameterInstructions())]}).s("AWSCognitoIdentityService","GetCredentialsForIdentity",{}).n("CognitoIdentityClient","GetCredentialsForIdentityCommand").sc(yt).build(){}class Rt extends C.classBuilder().ep(R).m(function(e,t,o,i){return[P(o,e.getEndpointParameterInstructions())]}).s("AWSCognitoIdentityService","GetId",{}).n("CognitoIdentityClient","GetIdCommand").sc(vt).build(){}export{At as CognitoIdentityClient,St as GetCredentialsForIdentityCommand,Rt as GetIdCommand};
